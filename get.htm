<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="PSPad editor, www.pspad.com">
  <title></title>
    <script type="text/javascript">
      //Global variables
      var picWidth = 200; // width of the canvas
      var picHeight = 222; // height of the canvas
      var picLength = picWidth * picHeight; // number of chunks
      var myImage = new Image(); // Create a new blank image.
      // Load the image and display it.
      function displayImage() {
        // Get the canvas element.
        canvas = document.getElementById("myCanvas");
        // Make sure you got it.
        if (canvas.getContext) {
          // Specify 2d canvas type.
          ctx = canvas.getContext("2d");
          // When the image is loaded, draw it.
          myImage.onload = function() {
            // Load the image into the context.
            ctx.drawImage(myImage, 0, 0);
            // Get and modify the image data.
            getColorData();
            // Put the modified image back on the canvas.
            putColorData();
          }

          // Define the source of the image.
          // This file must be on your machine in the same folder as this web page.
          myImage.src = "jpg/vidl0001.jpg";
        }
      }
      function getColorData() {
        myImage = ctx.getImageData(0, 0, 200, 222);
        // Loop through data.
        for (var i = 0; i < picLength * 4; i += 4) {
          // First bytes are red bytes.        
          // Remove all red.
          myImage.data[i] = 2;
          // Second bytes are green bytes.
          // Third bytes are blue bytes.
          // Fourth bytes are alpha bytes
        }
      }
      function putColorData() {
        ctx.putImageData(myImage, 0, 0);
      }
    </script>
<script type="text/javascript">
<!--
function FindPosition(oElement)
{
  if(typeof( oElement.offsetParent ) != "undefined")
  {
    for(var posX = 0, posY = 0; oElement; oElement = oElement.offsetParent)
    {
      posX += oElement.offsetLeft;
      posY += oElement.offsetTop;
    }
      return [ posX, posY ];
    }
    else
    {
      return [ oElement.x, oElement.y ];
    }
}

function GetCoordinates(e)
{
  var PosX = 0;
  var PosY = 0;
  var ImgPos;
  ImgPos = FindPosition(myImg);
  if (!e) var e = window.event;
  if (e.pageX || e.pageY)
  {
    PosX = e.pageX;
    PosY = e.pageY;
  }
  else if (e.clientX || e.clientY)
    {
      PosX = e.clientX + document.body.scrollLeft
        + document.documentElement.scrollLeft;
      PosY = e.clientY + document.body.scrollTop
        + document.documentElement.scrollTop;
    }
  PosX = PosX - ImgPos[0];
  PosY = PosY - ImgPos[1];
  document.getElementById("x").innerHTML = PosX;
  document.getElementById("y").innerHTML = PosY;

  document.getElementById("p").innerHTML = "p:"+getPixel(myImg, 0, 0).toString();
}
function getPixel(img, x, y) {

    let canvas = document.createElement('canvas');
    canvas.width = 1;
    canvas.height = 1;
    alert("hello1:");
    canvas.getContext('2d').drawImage(img, x, y, 1, 1, 0, 0, 1, 1);;
    alert("hello2:");
    let pixelData = canvas.getContext('2d').getImageData(0, 0, 1, 1).data;
    alert("hello3:");
    return pixelData;   
}
//-->
</script>
  </head>
  <body onLoad="displayImage()">
    <img id="myPhoto" src="jpg/vidl0032.jpg"><br>
<script type="text/javascript">
<!--
var myImg = document.getElementById("myPhoto");
myImg.onmousedown = GetCoordinates;
//-->
</script>

    <canvas id="myCanvas" width="200" height="222">
    </canvas>
    <p>X:<span id="x"></span></p>
    <p>Y:<span id="y"></span></p>
    <p>p:<span id="p"></span></p>
  </body>
</html>
